# Service for aggregating users
Application provides endpoints for selecting data, aggregated from configured databases.
#### The API specification: [src/main/resources/api.yaml](src/main/resources/api.yaml)
#### Configuration file: [src/main/resources/application.yaml](src/main/resources/application.yaml)
## Implementation notes
The application is implemented with usage of Spring Boot framework, 
the main idea is to create c3po pooled data sources with supported driver (PostgresSQL or Oracle DB)
and to use them in Spring-JDBC MappingSqlQuery-based query [hierarchy](src/main/java/de/comparus/test/query).
The API is defined in the api specification file and generated by gradle task as "de.comparus.test.api.UsersApi" interface. 
It is implemented by [UserController](src/main/java/de/comparus/test/controller/UserController.java) controller.
The API allows you to get all users, to get users with exact id and to get users filtered by username ('*' symbol is used as wildcard)
## Configuration
The application allows you to configure unlimited amount of data sources by editing the configuration file.
Root prefix "data-sources" **must be followed by all these parameters**: 
- name - identifier for this connection
- strategy - DBMS type, 'postgres' and 'oracle' values are supported
- url - JDBC url of specific database
- table - tablename to select data from
- user - username to connect with
- password - to connect with
- mapping - column names to select from
  - id
  - username
  - name
  - surname
## Testing
There is implemented one testcontainer-based integration test - [SolitaryIntegrationTest](src/test/java/de/comparus/test/SolitaryIntegrationTest.java).
It selects values from two postgres databases, configured in overridden configuration file [src/test/resources/application.yaml](src/test/resources/application.yaml).
JDBC urls contain all necessary data for driver to create and to cache configured containers, as well as to initialize contents of the databases 
